# JavaScript模式阅读笔记

----

JavaScript中有五种基本类型不是对象：数值类型、字符串类型、布尔类型、空类型和未定义类型。其中前三个类型有对应的以基本类型封装形式体现的对象表示。数值类型、字符串类型和布尔类型的值可以通过程序员或者位于幕后的JavaScript解析器来实现面向对象的转换。

函数实际上也是对象，函数有属性和方法。

在JavaScript中，一旦定义好了变量，同时也就已经在处理对象了。首先，该变量会自动成为内置对象的一个属性，成为激活对象（如果改变量是一个全局变量，那么该变量会成为全局对象的一个属性）。
第二，该变量实际上也是伪类，因为它拥有其自身的属性（称为attributes），该属性决定了该变量是否可以被修改、被删除和在一个for-in循环中进行枚举。这些属性在ECMAScript3中没有直接对外提供，但在第5版本的ECMAScript中，提供了一个特殊描述方法来操作这些属性。

一个对象仅仅是一个容器，该容器包含了命名的属性、键-值对（大多数）的列表。这里面的属性可以是函数（函数对象），这种情形下我们称之其为方法。

对象主要有两种类型：

+ 原声的（Native）
	+ 原生对象可以进一步分为内置对象（例如数组、日期对象等）和用户自定义对象

+ 主机的（Host）
	+ 主机对象包含Windows对象和所有的DOM对象。如果还不确定使用的是否是主机对象，可以尝试在不同的、无浏览器的环境下运行该代码，如果该代码能正确的运行，那么应该使用的是原生的对象。


如果需要访问不带硬编码处理的标识window，可以按如下方式，从内嵌函数的作用域访问：

```JavaScript
var global = (function(){
	teturn this;
}());
```

### 单一模式

只使用一个var在函数顶部进行变量声明是一种非常有用的模式。它的好处在于：

+ 提供一个单一的地址以查找到函数需要的所有局部变量。
+ 防止出现变量在定义前就被使用的逻辑错误。
+ 帮助牢记要声明变量，以尽可能少地使用全局变量。
+ 更少的编码（无论是输入代码还是输出代码都更少更好）

```JavaScript
function fun() {
	var a = 1,
		b = 2,
		sum = a + b,
		myObj = {},
		i,
		j;
	//函数体
}
```

使用一个var关键字声明由逗号分割的多个变量。在声明变量的同时初始化变量，为变量赋初始值也是一种良好的方法。这样可以防止逻辑错误（所有未初始化且未声明的变量，其值都为undefined），也可以提高代码的可读性。

for模式中的两个变量引出了一些细微的操作，原因是，

+ 使用了最少的变量（而非最多）
+ 逐步减至0，这样通常更快，因为同比0比较比同数组的长度比较，或同非0数组比较更有效率。

最好的方法就是不要给内置的原型增加属性。以下情形是例外，可以为内置的原型增加属性：

1. 当未来的ECMAScript版本或JavaScript的具体实现可能将该功能性能作为一个统一的内置方法时。例如：可以添加ECMAScript5种描述的方法，并等待浏览器来对其支持。在这种情形下，仅仅是提前定义了有用的方法。
2. 如果检查了自定义的属性或方法并为存在时。也许在其他地方已经实现了该方法，或者是某个您支持的浏览器中JavaScript的一部分。
3. 您准确地用文档记录下来，并和团队交流清楚。

### switch语句通常采用如下格式：

+ 使每个case和switch纵向排列整齐（大括号的缩进规则是个例外）
+ 在每个case语句中使用代码缩进
+ 在每个case语句结尾有一个明确的break语句。
+ 避免使用fall-throughs（也就是有意不使用break语句，以使得程序会按顺序一直向下执行）。如果确实希望采用fall-trhoughs，那么请明确在代码中使用fall-throughs的确是最好的途径，因为在代码中这样做会让其他阅读您代码的人以为代码是有错误的。
+ 用default语句来作为switch的结束：当以上所有情形都不匹配时，给出一个默认的结果。

# 避免使用隐式类型转换


